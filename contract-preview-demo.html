<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contract Preview Demo</title>
    <style>
      body {
        font-family: 'Segoe UI', sans-serif;
        line-height: 1.6;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        color: #333;
      }
      .form-group {
        margin-bottom: 15px;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
      }
      input,
      select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
      }
      .clause {
        background: #f0f7ff;
        padding: 8px;
        margin: 5px 0;
        border-radius: 4px;
      }
      .clause button {
        float: right;
        background: #ff4444;
        border: none;
        color: white;
      }
      button {
        background-color: #4caf50;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
      }
      button:hover {
        background-color: #45a049;
      }
      #contractPreview {
        margin-top: 30px;
        padding: 20px;
        border: 1px solid #eee;
        border-radius: 5px;
        background-color: #f9f9f9;
      }
      .dark-mode {
        background-color: #222;
        color: #eee;
      }
      .dark-mode #contractPreview {
        background-color: #333;
        border-color: #444;
      }
      @media (max-width: 600px) {
        body {
          padding: 10px;
        }
      }
    </style>
  </head>
  <body>
    <h2>Contract Preview Generator</h2>

    <div class="form-group">
      <label for="clientName">Client Name:</label>
      <input type="text" id="clientName" placeholder="Enter client name" />
    </div>

    <div class="form-group">
      <label for="contractDate">Date:</label>
      <input type="date" id="contractDate" />
    </div>

    <div class="form-group">
      <label for="serviceType">Service Type:</label>
      <select id="serviceType">
        <option value="web">Web Development</option>
        <option value="design">Graphic Design</option>
        <option value="consulting">Consulting</option>
      </select>
    </div>

    <div class="form-group">
      <label for="contractAmount">Amount ($):</label>
      <input type="number" id="contractAmount" placeholder="Enter amount" />
    </div>

    <div class="clause-builder">
      <h4>Add Custom Clauses</h4>
      <select id="clauseType">
        <option value="confidentiality">Confidentiality</option>
        <option value="payment">Payment Terms</option>
        <option value="termination">Termination</option>
      </select>
      <button onclick="addClause()">+ Add Clause</button>
      <div id="customClauses"></div>
    </div>

    <button onclick="generateContract()">Generate Contract Preview</button>

    <div id="contractPreview"></div>
    // Add these buttons:
    <button onclick="saveDraft()">Save Draft</button>
    <button onclick="loadDraft()">Load Draft</button>
    // Add to HTML:
    <label for="template">Template:</label>
    <select id="template" onchange="changeTemplate()">
      <option value="simple">Simple Agreement</option>
      <option value="nda">NDA</option>
      <option value="service">Service Contract</option>
    </select>

    <div class="signature-section">
      <h4>Signature</h4>
      <canvas
        id="signaturePad"
        width="300"
        height="150"
        style="border: 1px solid #ddd; cursor: crosshair"
      ></canvas>
      <div>
        <button onclick="clearSignature()">Clear</button>
        <button onclick="saveSignature()">Save</button>
      </div>
    </div>

    <div class="pricing">
      <h4>Fee Calculator</h4>
      <label><input type="checkbox" id="rushFee" /> Rush Fee (+20%)</label>
      <label><input type="checkbox" id="taxable" /> Include Tax (8%)</label>
      <p>Subtotal: $<span id="subtotal">0</span></p>
      <p>Total: $<span id="total">0</span></p>
    </div>

    <div class="pricing">
      <h4>Fee Calculator</h4>
      <label><input type="checkbox" id="rushFee" /> Rush Fee (+20%)</label>
      <label><input type="checkbox" id="taxable" /> Include Tax (8%)</label>
      <p>Subtotal: $<span id="subtotal">0</span></p>
      <p>Total: $<span id="total">0</span></p>
    </div>

    <script>
      document
        .getElementById('contractAmount')
        .addEventListener('input', calculateFees)
      document
        .getElementById('rushFee')
        .addEventListener('change', calculateFees)
      document
        .getElementById('taxable')
        .addEventListener('change', calculateFees)

      function calculateFees() {
        const amount =
          parseFloat(document.getElementById('contractAmount').value) || 0
        let subtotal = amount

        if (document.getElementById('rushFee').checked) {
          subtotal *= 1.2
        }

        document.getElementById('subtotal').textContent = subtotal.toFixed(2)

        let total = subtotal
        if (document.getElementById('taxable').checked) {
          total *= 1.08
        }

        document.getElementById('total').textContent = total.toFixed(2)
      }
      document
        .getElementById('contractAmount')
        .addEventListener('input', calculateFees)
      document
        .getElementById('rushFee')
        .addEventListener('change', calculateFees)
      document
        .getElementById('taxable')
        .addEventListener('change', calculateFees)

      function calculateFees() {
        const amount =
          parseFloat(document.getElementById('contractAmount').value) || 0
        let subtotal = amount

        if (document.getElementById('rushFee').checked) {
          subtotal *= 1.2
        }

        document.getElementById('subtotal').textContent = subtotal.toFixed(2)

        let total = subtotal
        if (document.getElementById('taxable').checked) {
          total *= 1.08
        }

        document.getElementById('total').textContent = total.toFixed(2)

        let isDrawing = false
        const canvas = document.getElementById('signaturePad')
        const ctx = canvas.getContext('2d')

        canvas.addEventListener('mousedown', startDrawing)
        canvas.addEventListener('mousemove', draw)
        canvas.addEventListener('mouseup', stopDrawing)

        function startDrawing(e) {
          isDrawing = true
          draw(e)
        }

        function draw(e) {
          if (!isDrawing) return
          ctx.lineWidth = 2
          ctx.lineCap = 'round'
          ctx.strokeStyle = '#000'

          ctx.lineTo(e.offsetX, e.offsetY)
          ctx.stroke()
          ctx.beginPath()
          ctx.moveTo(e.offsetX, e.offsetY)
        }

        function stopDrawing() {
          isDrawing = false
          ctx.beginPath()
        }

        function clearSignature() {
          ctx.clearRect(0, 0, canvas.width, canvas.height)
        }

        function saveSignature() {
          // Can convert to image: canvas.toDataURL()
          alert('Signature saved!')
        }
      }

      function addClause() {
        const clauseType = document.getElementById('clauseType').value
        const clauses = {
          confidentiality:
            'Both parties agree to keep all sensitive information confidential.',
          payment: 'Payment shall be made within 30 days of invoice receipt.',
          termination:
            'Either party may terminate this agreement with 30 days written notice.',
        }

        const clauseDiv = document.createElement('div')
        clauseDiv.className = 'clause'
        clauseDiv.innerHTML = `<p>${clauses[clauseType]} <button onclick="this.parentElement.remove()">Ã—</button></p>`
        document.getElementById('customClauses').appendChild(clauseDiv)
      }
      function generateContract() {
        // Get form values
        const clientName =
          document.getElementById('clientName').value || '[Client Name]'
        const contractDate =
          document.getElementById('contractDate').value || '[Date]'
        const serviceType = document.getElementById('serviceType').value
        const amount =
          document.getElementById('contractAmount').value || '[Amount]'

        // Format date
        const formattedDate =
          contractDate !== '[Date]'
            ? new Date(contractDate).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })
            : '[Date]'

        // Service type mapping
        const serviceTypes = {
          web: 'Web Development Services',
          design: 'Graphic Design Services',
          consulting: 'Consulting Services',
        }

        // Generate contract preview
        document.getElementById('contractPreview').innerHTML = `
                      <h3>CONTRACT AGREEMENT</h3>
                      <p>This Agreement is made and entered into as of ${formattedDate}, by and between:</p>

                      <h4>Company Name</h4>
                      <p>123 Business Street<br>City, State 10001</p>

                      <h4>AND</h4>

                      <h4>${clientName}</h4>
                      <p>[Client Address]</p>

                      <h4>Service Description</h4>
                      <p>${serviceTypes[serviceType]} as described in attached Statement of Work.</p>

                      <h4>Payment Terms</h4>
                      <p>Total contract amount: $${amount} to be paid as follows: [Payment terms].</p>

                      <p style="margin-top: 20px;"><strong>Signed:</strong></p>
                      <div style="display: flex; justify-content: space-between; margin-top: 40px;">
                          <div>
                              <p>___________________________</p>
                              <p>Company Representative</p>
                          </div>
                          <div>
                              <p>___________________________</p>
                              <p>${clientName}</p>
                          </div>
                      </div>
                  `
      }
      function validateForm() {
        const name = document.getElementById('clientName').value
        if (!name) {
          alert('Please enter client name')
          return false
        }
        return true
      }

      // Update your button to:
      ;<button onclick='if(validateForm()) generateContract()'>
        Generate Contract Preview
      </button>

      function validateForm() {
        const name = document.getElementById('clientName').value
        if (!name) {
          alert('Please enter client name')
          return false
        }
        return true
      }

      // Update your button to:
      ;<button onclick='if(validateForm()) generateContract()'>
        Generate Contract Preview
      </button>

      function exportToPDF() {
        const preview = document.getElementById('contractPreview')
        if (!preview.innerHTML) {
          alert('Please generate contract first')
          return
        }

        const originalContents = document.body.innerHTML
        document.body.innerHTML = preview.innerHTML
        window.print()
        document.body.innerHTML = originalContents
      }

      ;<button onclick='exportToPDF()' style='margin-top: 10px;'>
        Export as PDF
      </button>
      // Save draft
      function saveDraft() {
        const formData = {
          name: document.getElementById('clientName').value,
          date: document.getElementById('contractDate').value,
          service: document.getElementById('serviceType').value,
          amount: document.getElementById('contractAmount').value,
        }
        sessionStorage.setItem('contractDraft', JSON.stringify(formData))
        alert('Draft saved (session only)')
      }

      // Load draft
      function loadDraft() {
        const draft = JSON.parse(sessionStorage.getItem('contractDraft'))
        if (draft) {
          document.getElementById('clientName').value = draft.name
          document.getElementById('contractDate').value = draft.date
          document.getElementById('serviceType').value = draft.service
          document.getElementById('contractAmount').value = draft.amount
        }
      }

      // Call this on page load
      window.addEventListener('DOMContentLoaded', loadDraft)

      // Add to JS:
      function changeTemplate() {
        const template = document.getElementById('template').value
        // You can add different template logic here
        console.log('Selected template:', template)
      }

      function toggleDarkMode() {
        document.body.classList.toggle('dark-mode')
      }

      // Add button:
      ;<button onclick='toggleDarkMode()'>Toggle Dark Mode</button>
    </script>
  </body>
</html>
